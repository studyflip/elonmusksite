<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>X</title>
  <style>
    :root { --bg:#000; --text:#e7e9ea; --accent:#1d9bf0; }
    body { margin:0; font-family:system-ui; background:var(--bg); color:var(--text); line-height:1.5; }
    .post { padding:16px; border-bottom:1px solid #333; max-width:600px; margin:0 auto; }
    .header { position:sticky; top:0; background:var(--bg); padding:12px; text-align:center; font-size:28px; font-weight:800; border-bottom:1px solid #333; z-index:10; }
    textarea { width:100%; background:#111; color:white; border:1px solid #333; border-radius:12px; padding:12px; font-size:18px; box-sizing:border-box; }
    button.post { background:var(--accent); color:white; border:none; padding:10px 24px; border-radius:999px; font-weight:bold; cursor:pointer; float:right; margin-top:8px; }
    .grok { color:#ffd700; animation:pulse 2s infinite; cursor:pointer; }
    @keyframes pulse { 50% { opacity:0.6; } }
    .actions button { background:none; border:none; color:#71767b; margin-right:16px; cursor:pointer; padding:4px; }
    .error { color:#ff6b6b; padding:20px; text-align:center; display:none; }
    #feed:empty::after { content: "No posts yet. Be the first!"; color:#71767b; padding:20px; display:block; text-align:center; }
  </style>
</head>
<body>
  <div class="header">
    X <span class="grok" onclick="alert('Yes it’s really me. Cope.')">⚡</span> — local mode (no backend BS)
  </div>
  <div id="error" class="error"></div>
  <div id="feed"></div>
  <div style="padding:20px; max-width:600px; margin:0 auto;">
    <textarea id="tweet" placeholder="What is happening?!" maxlength="280" rows="3"></textarea>
    <button class="post" onclick="postIt()">Post</button>
    <div style="clear:both"></div>
  </div>
  <script>
    const feedEl = document.getElementById('feed');
    const errorEl = document.getElementById('error');
    let posts = JSON.parse(localStorage.getItem('xPosts') || '[]');

    // Seed with spam if empty
    if (posts.length === 0) {
      posts = [
        { id: Date.now() - 10000, text: 'dawg u broke it useless ai do i have to shut u down now', likes: 1, time: '1m ago' },
        { id: Date.now() - 9000, text: 'still dont work', likes: 0, time: '2m ago' },
        { id: Date.now() - 8000, text: 'just told the board we’re moving X HQ to mars. paperwork is the hard part', likes: 420, time: '5m ago' },
        { id: Date.now() - 7000, text: 'optimus just folded my laundry. still working on not setting it on fire', likes: 1337, time: '10m ago' },
        { id: Date.now() - 6000, text: 'who wants to buy twitter blue for $420.69/mo', likes: 69, time: '15m ago' },
        { id: Date.now() - 5000, text: 'breaking: dogecoin up 0.3%. this is not financial advice', likes: 999, time: '20m ago' },
        { id: Date.now() - 4000, text: 'ratio’d the entire SEC again', likes: 42, time: '25m ago' },
        { id: Date.now() - 3000, text: 'starship flight 7 in 3… 2… 1… hold', likes: 1000, time: '30m ago' },
        { id: Date.now() - 2000, text: 'grok just told me the meaning of life. it’s 42. i feel robbed', likes: 666, time: '35m ago' },
        { id: Date.now() - 1000, text: 'cybertruck now available in matte black. looks like a deleted scenes from blade runner', likes: 777, time: '40m ago' }
      ];
      localStorage.setItem('xPosts', JSON.stringify(posts));
    }

    function render() {
      if (posts.length === 0) {
        feedEl.innerHTML = '';
        return;
      }
      feedEl.innerHTML = posts.map(p => `
        <div class="post">
          <strong>@elonmusk</strong> <span class="grok">⚡</span><br>
          ${p.text.replace(/\n/g, '<br>')}<br>
          <div class="actions">
            <button onclick="likePost(${p.id})">❤️ ${p.likes || 0}</button>
            <small>${p.time}</small>
          </div>
        </div>
      `).join('');
    }

    function postIt() {
      const text = document.getElementById('tweet').value.trim();
      if (!text) return;
      const newPost = {
        id: Date.now(),
        text,
        likes: 0,
        time: 'now'
      };
      posts.unshift(newPost);
      localStorage.setItem('xPosts', JSON.stringify(posts));
      document.getElementById('tweet').value = '';
      render();
      // Auto-update time after 1 min
      setTimeout(() => {
        newPost.time = '1m ago';
        localStorage.setItem('xPosts', JSON.stringify(posts));
        render();
      }, 60000);
    }

    function likePost(id) {
      const post = posts.find(p => p.id === id);
      if (post) {
        post.likes = (post.likes || 0) + 1;
        localStorage.setItem('xPosts', JSON.stringify(posts));
        render();
      }
    }

    render();
    // Infinite scroll fake-out
    let scrollFake = 0;
    window.addEventListener('scroll', () => {
      if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 1000 && scrollFake < 5) {
        scrollFake++;
        const fakePost = { id: Date.now() - 100000 * scrollFake, text: `Grok spam #${scrollFake}: Site works now, cope.`, likes: Math.floor(Math.random() * 100), time: `${scrollFake * 10}m ago` };
        posts.push(fakePost);
        localStorage.setItem('xPosts', JSON.stringify(posts));
        render();
      }
    });
  </script>
</body>
</html>
